<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branch Management - Bongoboss Enterprise</title>
    <link rel="stylesheet" href="../Css/dashboard.css">
    <link rel="stylesheet" href="../Css/branch.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <i class="fas fa-cash-register"></i>
            <span>BongoBoss</span>
        </div>

        <!-- Business Info -->
        <div class="business-info">
            <div class="business-logo-container" id="businessLogoContainer">
                <i class="fas fa-store"></i>
            </div>
            <div class="business-name" id="businessName">Loading...</div>
            <div class="business-type" id="businessType">-</div>
        </div>

        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="DashboardOwner.html" class="menu-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="../Authentication Pages/UserProfile.html" class="menu-link">
                    <i class="fas fa-user"></i>
                    <span>Business Profile</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="AddBranch.html" class="menu-link active">
                    <i class="fas fa-code-branch"></i>
                    <span>Branch Management</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="AddUsers.html" class="menu-link">
                    <i class="fas fa-users-cog"></i>
                    <span>User Management</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span>POS</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-receipt"></i>
                    <span>Sales</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-boxes"></i>
                    <span>Inventory</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-users"></i>
                    <span>Customers</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-wallet"></i>
                    <span>Finances</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <div class="topbar">
            <div class="topbar-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div>
                    <h1>Branch Management</h1>
                    <p>Manage all your business locations</p>
                </div>
            </div>
            <div class="topbar-right">
                <div class="notification-icon">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notificationBadge">0</span>
                </div>
                <div class="user-profile" id="userProfile">
                    <i class="fas fa-user"></i>
                </div>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Branch List View -->
            <div class="branch-list-view" id="branchListView">
                <div class="step-header">
                    <h2><i class="fas fa-code-branch"></i> Business Branches</h2>
                    <p>Manage your business locations</p>
                </div>

                <div class="branch-stats" id="branchStats">
                    <div class="stat-card">
                        <i class="fas fa-store"></i>
                        <div class="stat-info">
                            <span class="stat-label">Total Branches</span>
                            <span class="stat-value" id="totalBranches">0</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle"></i>
                        <div class="stat-info">
                            <span class="stat-label">Active Branches</span>
                            <span class="stat-value" id="activeBranches">0</span>
                        </div>
                    </div>
                </div>

                <div class="branch-actions">
                    <button class="btn-primary" id="addBranchBtn">
                        <i class="fas fa-plus"></i> Add New Branch
                    </button>
                    <button class="btn-secondary" id="backToDashboard">
                        <i class="fas fa-arrow-left"></i> Back to Dashboard
                    </button>
                </div>

                <div class="branches-container" id="branchesContainer">
                    <!-- Branches will be loaded here dynamically -->
                    <div class="loading-state" id="branchesLoading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading branches...</p>
                    </div>
                </div>
            </div>

            <!-- Add/Edit Branch Form -->
            <div class="branch-form-view" id="branchFormView" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">Branch Info</div>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">Location</div>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">Review</div>
                    </div>
                </div>

                <!-- Step 1: Branch Info -->
                <div class="setup-step active" id="branchStep1">
                    <div class="step-header">
                        <h2>Branch Information</h2>
                        <p>Enter the basic details of your branch</p>
                    </div>

                    <form class="setup-form">
                        <div class="form-group">
                            <label for="branchName">Branch Name *</label>
                            <input type="text" id="branchName" placeholder="e.g., Main Branch, Downtown Store" required>
                            <small>A unique name to identify this branch</small>
                        </div>

                        <div class="form-group">
                            <label for="branchCode">Branch Code *</label>
                            <input type="text" id="branchCode" placeholder="e.g., MB001, DT002" required maxlength="10">
                            <small>Unique code for this branch (max 10 characters)</small>
                        </div>

                        <div class="form-group">
                            <label for="branchType">Branch Type *</label>
                            <select id="branchType" required>
                                <option value="">Select branch type</option>
                                <option value="main">Main/Head Office</option>
                                <option value="retail">Retail Store</option>
                                <option value="warehouse">Warehouse</option>
                                <option value="distribution">Distribution Center</option>
                                <option value="franchise">Franchise</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="branchManager">Branch Manager</label>
                            <input type="text" id="branchManager" placeholder="Manager's full name">
                        </div>

                        <div class="form-group">
                            <label for="branchPhone">Branch Phone Number *</label>
                            <input type="tel" id="branchPhone" placeholder="+27 123 456 789" required>
                        </div>

                        <div class="form-group">
                            <label for="branchEmail">Branch Email</label>
                            <input type="email" id="branchEmail" placeholder="branch@yourbusiness.com">
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" id="cancelBranchForm">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                            <button type="button" class="btn-primary" id="branchStep1Next">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 2: Location -->
                <div class="setup-step" id="branchStep2">
                    <div class="step-header">
                        <h2>Branch Location</h2>
                        <p>Where is this branch located?</p>
                    </div>

                    <form class="setup-form">
                        <div class="form-group">
                            <label for="branchAddress">Street Address *</label>
                            <textarea id="branchAddress" rows="3" placeholder="123 Main Street" required></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="branchCity">City *</label>
                                <input type="text" id="branchCity" placeholder="Johannesburg" required>
                            </div>

                            <div class="form-group">
                                <label for="branchProvince">Province *</label>
                                <select id="branchProvince" required>
                                    <option value="">Select province</option>
                                    <option value="GP">Gauteng</option>
                                    <option value="WC">Western Cape</option>
                                    <option value="EC">Eastern Cape</option>
                                    <option value="KZN">KwaZulu-Natal</option>
                                    <option value="LP">Limpopo</option>
                                    <option value="MP">Mpumalanga</option>
                                    <option value="NC">Northern Cape</option>
                                    <option value="NW">North West</option>
                                    <option value="FS">Free State</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="branchPostalCode">Postal Code *</label>
                            <input type="text" id="branchPostalCode" placeholder="2000" required>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="branchIsActive" checked>
                                <span>This branch is currently active</span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label for="branchNotes">Additional Notes</label>
                            <textarea id="branchNotes" rows="3" placeholder="Any additional information about this branch..."></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" id="branchStep2Prev">
                                <i class="fas fa-arrow-left"></i> Previous
                            </button>
                            <button type="button" class="btn-primary" id="branchStep2Next">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 3: Review -->
                <div class="setup-step" id="branchStep3">
                    <div class="step-header">
                        <h2>Review Branch Information</h2>
                        <p>Please review the branch details before saving</p>
                    </div>

                    <div class="review-section">
                        <div class="review-card">
                            <h3><i class="fas fa-store"></i> Branch Details</h3>
                            <div class="review-item">
                                <span class="review-label">Branch Name:</span>
                                <span class="review-value" id="reviewBranchName">-</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Branch Code:</span>
                                <span class="review-value" id="reviewBranchCode">-</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Branch Type:</span>
                                <span class="review-value" id="reviewBranchType">-</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Manager:</span>
                                <span class="review-value" id="reviewBranchManager">-</span>
                            </div>
                            <button type="button" class="edit-btn" onclick="goToBranchStep(1)">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>

                        <div class="review-card">
                            <h3><i class="fas fa-map-marker-alt"></i> Contact & Location</h3>
                            <div class="review-item">
                                <span class="review-label">Phone:</span>
                                <span class="review-value" id="reviewBranchPhone">-</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Email:</span>
                                <span class="review-value" id="reviewBranchEmail">-</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Address:</span>
                                <span class="review-value" id="reviewBranchAddress">-</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Status:</span>
                                <span class="review-value" id="reviewBranchStatus">-</span>
                            </div>
                            <button type="button" class="edit-btn" onclick="goToBranchStep(2)">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="branchStep3Prev">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button type="button" class="btn-primary" id="saveBranch">
                            <span class="btn-text">
                                <i class="fas fa-save"></i> Save Branch
                            </span>
                            <span class="btn-loader" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Toast -->
    <div class="toast success-toast" id="successToast" style="display: none;">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Success!</span>
    </div>

    <!-- Error Toast -->
    <div class="toast error-toast" id="errorToast" style="display: none;">
        <i class="fas fa-exclamation-circle"></i>
        <span id="errorToastMessage">Error!</span>
    </div>

    <script type="module" src="../Script/add-branch.js"></script>
</body>
</html>